- builder:
    name: upload-console-log
    builders:
      - collect-config-files
      - stop-stacksh
      - collect-artifacts
      - shell: |
          #!/bin/bash -ex
          rm -f /tmp/grab_console_log_*.sh
          nohup $WORKSPACE/mlnx-project-config/tools/grab_console_log.sh > /tmp/grab_console_log_$$.sh &

- publisher:
    name: upload-console-log
    publishers:
      - postbuildscript:
          builders:
            - upload-console-log
              # These flags really mean only if on * when
              # checked. When both set to false the post script
              # should run on every job regardless of status.
          onfailure: False
          onsuccess: False

- publisher:
    name: upload-console-log-mn
    publishers:
      - postbuildscript:
          builders:
              - collect-config-files
              - collect-artifacts
              - shell: |
                  #!/bin/bash -x
                  rm -f /tmp/grab_console_log_*.sh
                  nohup $WORKSPACE/mlnx-project-config/tools/grab_console_log.sh > /tmp/grab_console_log_$$.sh &
              # These flags really mean only if on * when
              # checked. When both set to false the post script
              # should run on every job regardless of status.
          onfailure: False
          onsuccess: False
